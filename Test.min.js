let name_Product = document.getElementById("name_Product");
let category_Product = document.getElementById("category_Product");
let price_Product = document.getElementById("price_Product");
let discount_Product = document.getElementById("discount_Product");
let ads_Product = document.getElementById("ads_Product");
let taxes_Product = document.getElementById("taxes_Product");
let totale_Product = document.getElementById("totale_Product");
let count_Product = document.getElementById("count_Product");
let tbody = document.getElementById("tbody");
let add_Product = document.getElementById("add_Product");
let btn_Update = document.getElementById("btn_Update");
let search = document.getElementById("search");
let clear_All = document.getElementById("clear_All");
let temp; // take index from functio to function athore
function totale(){
    if(price_Product.value != "")
    {
        let result = ( Number(price_Product.value) + Number(ads_Product.value) + Number(taxes_Product.value) ) - Number(discount_Product.value);
        totale_Product.innerHTML = result;
        totale_Product.style.backgroundColor = "green";
    }
    else{
        ads_Product.value = "";
        taxes_Product.value = "";
        discount_Product.value = "";
        totale_Product.style.backgroundColor = "crimson";
        totale_Product.innerHTML  = "";
    }
};
///////////////////////////////////////////////////////////
let list_Products = [];
    if(localStorage.getItem("User product") != null)
    {
        list_Products = JSON.parse(localStorage.getItem("User product"));
        read_Products(list_Products);
    }
    else{
        list_Products=[];
    };
///////////////////////////////////////////////////////////
function creat_Data(){
    if(name_Product.value != "" && price_Product.value != "")
    {
        let object_Product ={
            name: name_Product.value,
            category: category_Product.value,
            price: price_Product.value,
            ads: ads_Product.value,
            taxes: taxes_Product.value,
            discount: discount_Product.value,
            total_Object: totale_Product.innerText,
            count: count_Product.value,
        };
        totale_Product.style.backgroundColor = "crimson";
        list_Products.push(object_Product);
        localStorage.setItem("User product" , JSON.stringify(list_Products) );
        read_Products(list_Products);
        remove_Value();
        name_Product.style.backgroundColor ="white";
        price_Product.style.backgroundColor ="white";
    }
    else{
        name_Product.style.backgroundColor ="crimson";
        price_Product.style.backgroundColor ="crimson";
    }
};
///////////////////////////////////////////////////////////
name_Product.onkeyup = function(){
    name_Product.style.backgroundColor ="white";
};
price_Product.onkeyup = function(){
    price_Product.style.backgroundColor ="white";
};
///////////////////////////////////////////////////////////
function read_Products(together){
    let box =``;
    for(let i = 0 ; i < together.length ; i++ )
    {
        box += `
        <tr>
            <td>${i}</td>
            <td>${together[i].name}</td>
            <td>${together[i].category}</td>
            <td>${together[i].count}</td>
            <td>${together[i].price}</td>
            <td>${together[i].discount}</td>
            <td>${together[i].ads}</td>
            <td>${together[i].taxes}</td>
            <td>${together[i].total_Object}</td>
            <td><button class="btn btn-outline-success" onclick="up_Info(${i})" >Update</button></td>
            <td><button class="btn btn-outline-danger" onclick="delete_Products(${i})">Delete</button></td>
        </tr>
        `;
    }
///////////////////////////////////////////////////////////
    if(list_Products.length > 0)
    {
        clear_All.style.display="block";
        clear_All.innerHTML = list_Products.length
    }
    else{
        clear_All.style.display="none";
    }
    tbody.innerHTML = box;
};
///////////////////////////////////////////////////////////
function up_Info(term_Index_Info){
    name_Product.value = list_Products[term_Index_Info].name
    category_Product.value = list_Products[term_Index_Info].category
    price_Product.value = list_Products[term_Index_Info].price
    ads_Product.value = list_Products[term_Index_Info].ads
    taxes_Product.value = list_Products[term_Index_Info].taxes
    discount_Product.value = list_Products[term_Index_Info].discount
    count_Product.value = list_Products[term_Index_Info].count
///////////////////////////////////////////////////////////
    totale();
    temp = term_Index_Info;
    add_Product.style.display="none";
    btn_Update.style.display ="block";
};
///////////////////////////////////////////////////////////
function update_Info(){
    list_Products[temp].name = name_Product.value;
    list_Products[temp].category = category_Product.value;
    list_Products[temp].price = price_Product.value;
    list_Products[temp].ads = ads_Product.value;
    list_Products[temp].taxes = taxes_Product.value;
    list_Products[temp].discount = discount_Product.value;
    list_Products[temp].count = count_Product.value;
///////////////////////////////////////////////////////////
    localStorage.setItem("User product" , JSON.stringify(list_Products) );
    read_Products(list_Products);
///////////////////////////////////////////////////////////
    add_Product.style.display="block";
    btn_Update.style.display ="none"
///////////////////////////////////////////////////////////
    name_Product.value = "";
    category_Product.value = "";
    count_Product.value = "";
    ads_Product.value = "";
    taxes_Product.value = "";
    discount_Product.value = "";
    totale_Product.innerHTML  = "";
    totale_Product.style.backgroundColor = "crimson";
};
///////////////////////////////////////////////////////////
function search_Product(search_Term){
    let list_search = [];

    for(let i = 0; i < list_Products.length; i++) 
    {
        if(list_Products[i].name.toLowerCase().includes(search_Term.toLowerCase()) == true)
        {
            list_search.push(list_Products[i]);
        }
    }
    read_Products(list_search);
};
///////////////////////////////////////////////////////////
function delete_Products(delet_Item)
{
    list_Products.splice(delet_Item,1);
    localStorage.setItem("User product" , JSON.stringify(list_Products) );
    read_Products(list_Products);
    btn_Update.style.display="none";
    add_Product.style.display="block";
    name_Product.value = "";
    category_Product.value = "";
    price_Product.value = "";
    ads_Product.value = "";
    taxes_Product.value = "";
    count_Product.value = "";
    discount_Product.value = "";
    totale_Product.innerHTML = "";
    totale_Product.style.backgroundColor = "crimson";
};
///////////////////////////////////////////////////////////
function remove_Value(){
    name_Product.value = "";
    category_Product.value = "";
    price_Product.value = "";
    ads_Product.value = "";
    taxes_Product.value = "";
    discount_Product.value = "";
    totale_Product.innerHTML = "";
    count_Product.value = "";
};
///////////////////////////////////////////////////////////
function clearAllProducts(){
    localStorage.clear();
    list_Products.splice(0);
    read_Products(list_Products);

    btn_Update.style.display="none";
    add_Product.style.display="block";
    name_Product.value = "";
    category_Product.value = "";
    price_Product.value = "";
    ads_Product.value = "";
    taxes_Product.value = "";
    count_Product.value = "";
    discount_Product.value = "";
};